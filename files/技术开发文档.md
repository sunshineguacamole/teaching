# æ•™æˆä¸ªäººå­¦æœ¯ç½‘ç«™ - æŠ€æœ¯å¼€å‘æ–‡æ¡£

## ğŸ“‘ ç›®å½•
1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
3. [æŠ€æœ¯æ ˆé€‰å‹](#æŠ€æœ¯æ ˆé€‰å‹)
4. [åŠŸèƒ½æ¨¡å—è¯¦ç»†è®¾è®¡](#åŠŸèƒ½æ¨¡å—è¯¦ç»†è®¾è®¡)
5. [æ•°æ®åº“è®¾è®¡](#æ•°æ®åº“è®¾è®¡)
6. [API æ¥å£è®¾è®¡](#api-æ¥å£è®¾è®¡)
7. [å®‰å…¨æ€§è®¾è®¡](#å®‰å…¨æ€§è®¾è®¡)
8. [éƒ¨ç½²æ–¹æ¡ˆ](#éƒ¨ç½²æ–¹æ¡ˆ)
9. [å¼€å‘è§„èŒƒ](#å¼€å‘è§„èŒƒ)
10. [æµ‹è¯•è®¡åˆ’](#æµ‹è¯•è®¡åˆ’)

---

## é¡¹ç›®æ¦‚è¿°

### é¡¹ç›®èƒŒæ™¯
ä¸ºè®¡ç®—æœºè½¯ä»¶å·¥ç¨‹ä¸“ä¸šæ•™æˆæ‰“é€ çš„ä¸ªäººå­¦æœ¯ç½‘ç«™ï¼Œä¸»è¦æœåŠ¡äºæ•™å­¦æ´»åŠ¨å’Œå­¦ç”ŸæŒ‡å¯¼å·¥ä½œã€‚

### æ ¸å¿ƒç›®æ ‡
- **ä¸»è¦å—ä¼—**ï¼šæœ¬ç§‘ç”Ÿã€ç ”ç©¶ç”Ÿ
- **æ ¸å¿ƒåŠŸèƒ½**ï¼šè¯¾ç¨‹èµ„æ–™ç®¡ç†ã€æ•™å­¦èµ„æºå…±äº«ã€å­¦ç”ŸæŒ‡å¯¼å±•ç¤º
- **æŠ€æœ¯è¦æ±‚**ï¼šåŠ¨æ€ç½‘ç«™ã€åå°ç®¡ç†ç³»ç»Ÿã€æ–‡ä»¶ç®¡ç†ã€ç”¨æˆ·äº’åŠ¨

### é¡¹ç›®ç‰¹ç‚¹
- ä»¥æ•™å­¦ä¸ºä¸­å¿ƒ
- å¼ºè°ƒèµ„æºç®¡ç†å’Œåˆ†äº«
- æ³¨é‡ç”¨æˆ·ä½“éªŒå’Œè®¿é—®æ•ˆç‡
- éœ€è¦é•¿æœŸç»´æŠ¤å’Œå†…å®¹æ›´æ–°

---

## ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·å±‚                            â”‚
â”‚  Webæµè§ˆå™¨  â”‚  ç§»åŠ¨ç«¯æµè§ˆå™¨  â”‚  å¾®ä¿¡å°ç¨‹åº(å¯é€‰)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  å‰ç«¯å±•ç¤ºå±‚                          â”‚
â”‚  React 18 + TypeScript + Ant Design                 â”‚
â”‚  - å“åº”å¼è®¾è®¡                                        â”‚
â”‚  - ç»„ä»¶åŒ–å¼€å‘                                        â”‚
â”‚  - çŠ¶æ€ç®¡ç† (Redux Toolkit)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  API ç½‘å…³å±‚                          â”‚
â”‚  Nginx åå‘ä»£ç† + è´Ÿè½½å‡è¡¡                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  åº”ç”¨æœåŠ¡å±‚                          â”‚
â”‚  Node.js + Express.js / Nest.js                     â”‚
â”‚  - RESTful API                                      â”‚
â”‚  - ä¸šåŠ¡é€»è¾‘å¤„ç†                                      â”‚
â”‚  - æƒé™æ§åˆ¶                                          â”‚
â”‚  - æ–‡ä»¶å¤„ç†                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ•°æ®æŒä¹…å±‚      â”‚   ç¼“å­˜å±‚          â”‚  æ–‡ä»¶å­˜å‚¨      â”‚
â”‚  MySQL 8.0       â”‚  Redis 7.0       â”‚  é˜¿é‡Œäº‘ OSS    â”‚
â”‚  - å…³ç³»æ•°æ®       â”‚  - ä¼šè¯ç¼“å­˜       â”‚  - è¯¾ä»¶æ–‡ä»¶    â”‚
â”‚  - äº‹åŠ¡æ”¯æŒ       â”‚  - çƒ­ç‚¹æ•°æ®       â”‚  - å›¾ç‰‡èµ„æº    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### éƒ¨ç½²æ¶æ„
```
Internet
    â†“
[CDN åŠ é€Ÿ] â†’ é™æ€èµ„æº
    â†“
[è´Ÿè½½å‡è¡¡å™¨]
    â†“
[WebæœåŠ¡å™¨é›†ç¾¤] â†’ Nginx
    â†“
[åº”ç”¨æœåŠ¡å™¨é›†ç¾¤] â†’ Node.js
    â†“
[æ•°æ®åº“ä¸»ä»] â†’ MySQL Master/Slave
```

---

## æŠ€æœ¯æ ˆé€‰å‹

### å‰ç«¯æŠ€æœ¯æ ˆ

#### æ ¸å¿ƒæ¡†æ¶
- **React 18.2+**
  - ç†ç”±ï¼šç»„ä»¶åŒ–ã€ç”Ÿæ€å®Œå–„ã€æ€§èƒ½ä¼˜ç§€
  - ä½¿ç”¨ Hooks è¿›è¡ŒçŠ¶æ€ç®¡ç†
  - å‡½æ•°å¼ç»„ä»¶ä¸ºä¸»

- **TypeScript 5.0+**
  - ç†ç”±ï¼šç±»å‹å®‰å…¨ã€ä»£ç å¯ç»´æŠ¤æ€§å¼º
  - å‡å°‘è¿è¡Œæ—¶é”™è¯¯
  - æ›´å¥½çš„ IDE æ”¯æŒ

#### UI æ¡†æ¶
- **Ant Design 5.x**
  - ç†ç”±ï¼šä¼ä¸šçº§ç»„ä»¶åº“ã€ä¸­æ–‡å‹å¥½
  - ç»„ä»¶ä¸°å¯Œã€æ–‡æ¡£å®Œå–„
  - æ”¯æŒä¸»é¢˜å®šåˆ¶

#### çŠ¶æ€ç®¡ç†
- **Redux Toolkit**
  - ç®€åŒ– Redux ä½¿ç”¨
  - å†…ç½® Immerã€Thunk
  - é€‚åˆä¸­å¤§å‹åº”ç”¨

#### è·¯ç”±
- **React Router v6**
  - å£°æ˜å¼è·¯ç”±
  - åµŒå¥—è·¯ç”±æ”¯æŒ
  - æ‡’åŠ è½½ä¼˜åŒ–

#### æ„å»ºå·¥å…·
- **Vite 5.x**
  - æé€Ÿå¼€å‘æœåŠ¡å™¨
  - é«˜æ•ˆçš„ç”Ÿäº§æ„å»º
  - å®Œå–„çš„æ’ä»¶ç”Ÿæ€

#### å…¶ä»–å·¥å…·åº“
- **Axios** - HTTP è¯·æ±‚
- **Day.js** - æ—¥æœŸå¤„ç†
- **React Query** - æœåŠ¡ç«¯çŠ¶æ€ç®¡ç†
- **Formik + Yup** - è¡¨å•å¤„ç†å’ŒéªŒè¯
- **React Markdown** - Markdown æ¸²æŸ“
- **Prism.js** - ä»£ç é«˜äº®

### åç«¯æŠ€æœ¯æ ˆ

#### è¿è¡Œç¯å¢ƒ
- **Node.js 18 LTS+**
  - ç†ç”±ï¼šJavaScript å…¨æ ˆã€æ€§èƒ½ä¼˜ç§€
  - å¼‚æ­¥ I/Oã€äº‹ä»¶é©±åŠ¨
  - NPM ç”Ÿæ€ä¸°å¯Œ

#### Web æ¡†æ¶
**æ–¹æ¡ˆä¸€ï¼šExpress.jsï¼ˆæ¨èåˆæœŸï¼‰**
- è½»é‡çµæ´»
- ä¸­é—´ä»¶ç”Ÿæ€å®Œå–„
- å­¦ä¹ æ›²çº¿å¹³ç¼“

**æ–¹æ¡ˆäºŒï¼šNest.jsï¼ˆæ¨èé•¿æœŸï¼‰**
- TypeScript åŸç”Ÿæ”¯æŒ
- æ¨¡å—åŒ–æ¶æ„
- ä¾èµ–æ³¨å…¥ã€è£…é¥°å™¨
- æ›´é€‚åˆå¤§å‹åº”ç”¨

#### æ•°æ®åº“
- **MySQL 8.0**
  - ç†ç”±ï¼šæˆç†Ÿç¨³å®šã€äº‹åŠ¡æ”¯æŒ
  - JSON å­—æ®µæ”¯æŒ
  - ä¸°å¯Œçš„ç´¢å¼•ç±»å‹

- **ORM: TypeORM / Sequelize**
  - ç±»å‹å®‰å…¨
  - è¿ç§»ç®¡ç†
  - è·¨æ•°æ®åº“æ”¯æŒ

#### ç¼“å­˜
- **Redis 7.0**
  - ä¼šè¯å­˜å‚¨
  - çƒ­ç‚¹æ•°æ®ç¼“å­˜
  - æ¶ˆæ¯é˜Ÿåˆ—

#### æ–‡ä»¶å­˜å‚¨
- **é˜¿é‡Œäº‘ OSS**
  - æµ·é‡å­˜å‚¨
  - CDN åŠ é€Ÿ
  - æŒ‰éœ€ä»˜è´¹

#### è®¤è¯æˆæƒ
- **JWT (JSON Web Token)**
  - æ— çŠ¶æ€è®¤è¯
  - è·¨åŸŸå‹å¥½
  
- **Passport.js**
  - å¤šç§è®¤è¯ç­–ç•¥
  - æ˜“äºé›†æˆ

#### å…¶ä»–å·¥å…·
- **Multer** - æ–‡ä»¶ä¸Šä¼ 
- **Nodemailer** - é‚®ä»¶å‘é€
- **Winston** - æ—¥å¿—ç®¡ç†
- **PM2** - è¿›ç¨‹ç®¡ç†
- **dotenv** - ç¯å¢ƒå˜é‡ç®¡ç†

### å¼€å‘å·¥å…·

- **ç‰ˆæœ¬æ§åˆ¶**ï¼šGit + GitHub/GitLab
- **API æµ‹è¯•**ï¼šPostman / Insomnia
- **ä»£ç è§„èŒƒ**ï¼šESLint + Prettier
- **åŒ…ç®¡ç†**ï¼šnpm / pnpm
- **CI/CD**ï¼šGitHub Actions / Jenkins

---

## åŠŸèƒ½æ¨¡å—è¯¦ç»†è®¾è®¡

### æ¨¡å—ä¸€ï¼šç”¨æˆ·è®¤è¯ç³»ç»Ÿ

#### åŠŸèƒ½æè¿°
ç®¡ç†æ•™æˆï¼ˆç®¡ç†å‘˜ï¼‰å’Œå­¦ç”Ÿçš„ç™»å½•ã€æƒé™æ§åˆ¶ã€‚

#### è§’è‰²å®šä¹‰
1. **è¶…çº§ç®¡ç†å‘˜ï¼ˆæ•™æˆï¼‰**
   - å…¨éƒ¨æƒé™
   - å†…å®¹ç®¡ç†
   - ç”¨æˆ·ç®¡ç†

2. **æ™®é€šç”¨æˆ·ï¼ˆå­¦ç”Ÿï¼‰**
   - æµè§ˆå…¬å¼€å†…å®¹
   - ä¸‹è½½èµ„æº
   - æäº¤ä½œä¸š
   - ç•™è¨€äº’åŠ¨

3. **è®¿å®¢**
   - æµè§ˆå…¬å¼€é¡µé¢
   - æ— ä¸‹è½½æƒé™

#### æ ¸å¿ƒåŠŸèƒ½
- ç”¨æˆ·æ³¨å†Œï¼ˆå­¦ç”Ÿï¼‰
- ç™»å½•/ç™»å‡º
- å¯†ç é‡ç½®
- æƒé™éªŒè¯
- ä¼šè¯ç®¡ç†

#### æŠ€æœ¯å®ç°
```javascript
// JWT Token ç»“æ„
{
  userId: string,
  role: 'admin' | 'student' | 'guest',
  email: string,
  iat: number,  // ç­¾å‘æ—¶é—´
  exp: number   // è¿‡æœŸæ—¶é—´
}

// æƒé™ä¸­é—´ä»¶ç¤ºä¾‹
const requireAuth = (role) => {
  return (req, res, next) => {
    const token = req.headers.authorization;
    const decoded = verifyToken(token);
    if (decoded.role === role) {
      next();
    } else {
      res.status(403).json({ error: 'Forbidden' });
    }
  };
};
```

---

### æ¨¡å—äºŒï¼šè¯¾ç¨‹ç®¡ç†ç³»ç»Ÿ

#### æ•°æ®æ¨¡å‹
```typescript
interface Course {
  id: string;
  title: string;              // è¯¾ç¨‹åç§°
  code: string;               // è¯¾ç¨‹ç¼–å·
  semester: string;           // å­¦æœŸï¼ˆå¦‚ 2024æ˜¥å­£ï¼‰
  level: 'undergraduate' | 'graduate';  // æœ¬ç§‘/ç ”ç©¶ç”Ÿ
  description: string;        // è¯¾ç¨‹ç®€ä»‹
  syllabus: string;           // æ•™å­¦å¤§çº²
  status: 'active' | 'archived';  // çŠ¶æ€
  createdAt: Date;
  updatedAt: Date;
}

interface CourseChapter {
  id: string;
  courseId: string;
  title: string;              // ç« èŠ‚æ ‡é¢˜
  order: number;              // æ’åº
  content: string;            // ç« èŠ‚å†…å®¹
}

interface CourseMaterial {
  id: string;
  courseId: string;
  chapterId?: string;         // å¯é€‰ï¼Œå±äºæŸç« èŠ‚
  title: string;
  type: 'slide' | 'video' | 'code' | 'document';
  fileUrl: string;
  fileSize: number;
  uploadedAt: Date;
}
```

#### åŠŸèƒ½åˆ—è¡¨
1. **è¯¾ç¨‹ CRUD**
   - åˆ›å»ºæ–°è¯¾ç¨‹
   - ç¼–è¾‘è¯¾ç¨‹ä¿¡æ¯
   - åˆ é™¤/å½’æ¡£è¯¾ç¨‹
   - è¯¾ç¨‹åˆ—è¡¨å±•ç¤º

2. **ç« èŠ‚ç®¡ç†**
   - æ·»åŠ ç« èŠ‚
   - è°ƒæ•´é¡ºåº
   - ç¼–è¾‘å†…å®¹

3. **èµ„æ–™ç®¡ç†**
   - ä¸Šä¼ è¯¾ä»¶
   - åˆ†ç±»ç®¡ç†
   - ç‰ˆæœ¬æ§åˆ¶
   - æ‰¹é‡ä¸Šä¼ 

4. **å­¦ç”Ÿè§†å›¾**
   - æŒ‰å­¦æœŸæµè§ˆè¯¾ç¨‹
   - æŸ¥çœ‹è¯¾ç¨‹è¯¦æƒ…
   - ä¸‹è½½èµ„æ–™
   - æœç´¢åŠŸèƒ½

---

### æ¨¡å—ä¸‰ï¼šèµ„æºä¸­å¿ƒ

#### åŠŸèƒ½è®¾è®¡
```typescript
interface Resource {
  id: string;
  title: string;
  category: 'textbook' | 'tool' | 'code' | 'video' | 'other';
  tags: string[];
  description: string;
  fileUrl?: string;
  externalUrl?: string;
  downloadCount: number;
  createdAt: Date;
}
```

#### æ–‡ä»¶ä¸Šä¼ æµç¨‹
1. å‰ç«¯é€‰æ‹©æ–‡ä»¶ â†’ éªŒè¯å¤§å°/ç±»å‹
2. è·å–é¢„ç­¾å URLï¼ˆåç«¯ç”Ÿæˆï¼‰
3. ç›´æ¥ä¸Šä¼ åˆ° OSS
4. ä¸Šä¼ æˆåŠŸ â†’ ä¿å­˜å…ƒæ•°æ®åˆ°æ•°æ®åº“
5. è¿”å›æ–‡ä»¶è®¿é—®é“¾æ¥

#### OSS é…ç½®
```javascript
// é˜¿é‡Œäº‘ OSS é…ç½®ç¤ºä¾‹
const OSS = require('ali-oss');

const client = new OSS({
  region: 'oss-cn-beijing',
  accessKeyId: process.env.OSS_ACCESS_KEY_ID,
  accessKeySecret: process.env.OSS_ACCESS_KEY_SECRET,
  bucket: 'professor-resources'
});

// æ–‡ä»¶åˆ†ç±»å­˜å‚¨
// /courses/{courseId}/slides/
// /courses/{courseId}/videos/
// /resources/textbooks/
// /resources/tools/
```

---

### æ¨¡å—å››ï¼šå­¦ç”Ÿç®¡ç†

#### æ•°æ®æ¨¡å‹
```typescript
interface Student {
  id: string;
  name: string;
  studentId: string;
  email: string;
  degree: 'undergraduate' | 'master' | 'phd';
  enrollmentYear: number;
  status: 'active' | 'graduated';
  researchArea: string;
  thesisTitle?: string;
  profileImage?: string;
  bio?: string;
}

interface Supervision {
  id: string;
  studentId: string;
  role: 'advisor' | 'co-advisor';
  startDate: Date;
  endDate?: Date;
  achievements: string[];  // è®ºæ–‡ã€è·å¥–ç­‰
}
```

#### åŠŸèƒ½å®ç°
1. **åœ¨è¯»å­¦ç”Ÿå±•ç¤º**
   - æŒ‰å­¦ä½åˆ†ç±»
   - ç ”ç©¶æ–¹å‘æ ‡ç­¾
   - å­¦æœ¯æˆæœåˆ—è¡¨

2. **æ¯•ä¸šå­¦ç”Ÿå½’æ¡£**
   - æ¯•ä¸šå»å‘ç»Ÿè®¡
   - æ ¡å‹å¢™å±•ç¤º

3. **æ‹›ç”Ÿä¿¡æ¯**
   - æ‹›ç”Ÿæ–¹å‘å‘å¸ƒ
   - ç”³è¯·è¦æ±‚è¯´æ˜
   - åœ¨çº¿å’¨è¯¢è¡¨å•

---

### æ¨¡å—äº”ï¼šä½œä¸šç³»ç»Ÿ

#### æ•°æ®æ¨¡å‹
```typescript
interface Assignment {
  id: string;
  courseId: string;
  title: string;
  description: string;
  dueDate: Date;
  maxScore: number;
  attachments: string[];
  status: 'draft' | 'published' | 'closed';
  createdAt: Date;
}

interface Submission {
  id: string;
  assignmentId: string;
  studentId: string;
  fileUrl: string;
  submitTime: Date;
  score?: number;
  feedback?: string;
  status: 'submitted' | 'graded' | 'late';
}
```

#### æ ¸å¿ƒæµç¨‹
1. **æ•™æˆå‘å¸ƒä½œä¸š**
   - è®¾ç½®æˆªæ­¢æ—¥æœŸ
   - ä¸Šä¼ å‚è€ƒèµ„æ–™
   - å‘é€é€šçŸ¥

2. **å­¦ç”Ÿæäº¤**
   - åœ¨çº¿ä¸Šä¼ æ–‡ä»¶
   - æ”¯æŒå¤šæ¬¡æäº¤ï¼ˆè¦†ç›–ï¼‰
   - æˆªæ­¢å‰æé†’

3. **æ‰¹æ”¹å’Œåé¦ˆ**
   - æ‰¹é‡ä¸‹è½½æ‰€æœ‰æäº¤
   - åœ¨çº¿è¯„åˆ†
   - åé¦ˆæ„è§

---

### æ¨¡å—å…­ï¼šé€šçŸ¥å…¬å‘Šç³»ç»Ÿ

#### æ•°æ®æ¨¡å‹
```typescript
interface Announcement {
  id: string;
  title: string;
  content: string;
  type: 'course' | 'general' | 'urgent';
  courseId?: string;  // è¯¾ç¨‹é€šçŸ¥å…³è”è¯¾ç¨‹
  isPinned: boolean;
  publishDate: Date;
  expiryDate?: Date;
  author: string;
}
```

#### åŠŸèƒ½ç‰¹æ€§
- å¯Œæ–‡æœ¬ç¼–è¾‘
- å®šæ—¶å‘å¸ƒ
- ç½®é¡¶åŠŸèƒ½
- é‚®ä»¶æ¨é€ï¼ˆå¯é€‰ï¼‰
- æŒ‰ç±»å‹ç­›é€‰

---

### æ¨¡å—ä¸ƒï¼šåå°ç®¡ç†

#### ä»ªè¡¨ç›˜
- ç½‘ç«™è®¿é—®ç»Ÿè®¡
- èµ„æºä¸‹è½½æ’è¡Œ
- æœ€æ–°ç”¨æˆ·åŠ¨æ€
- å¾…å¤„ç†äº‹é¡¹æé†’

#### å†…å®¹ç®¡ç†
- è¯¾ç¨‹ç®¡ç†
- èµ„æºç®¡ç†
- é€šçŸ¥ç®¡ç†
- å­¦ç”Ÿä¿¡æ¯ç®¡ç†

#### ç³»ç»Ÿè®¾ç½®
- ä¸ªäººèµ„æ–™ç¼–è¾‘
- ç½‘ç«™é…ç½®
- æƒé™ç®¡ç†
- æ•°æ®å¤‡ä»½

---

## æ•°æ®åº“è®¾è®¡

### ER å›¾è¯´æ˜
ä¸»è¦å®ä½“å…³ç³»ï¼š
- ç”¨æˆ· (Users) â† 1:N â†’ æäº¤ (Submissions)
- è¯¾ç¨‹ (Courses) â† 1:N â†’ ç« èŠ‚ (Chapters)
- è¯¾ç¨‹ (Courses) â† 1:N â†’ èµ„æ–™ (Materials)
- è¯¾ç¨‹ (Courses) â† 1:N â†’ ä½œä¸š (Assignments)
- ä½œä¸š (Assignments) â† 1:N â†’ æäº¤ (Submissions)
- å­¦ç”Ÿ (Students) â† 1:N â†’ æŒ‡å¯¼è®°å½• (Supervisions)

### æ ¸å¿ƒè¡¨ç»“æ„

#### 1. ç”¨æˆ·è¡¨ (users)
```sql
CREATE TABLE users (
  id VARCHAR(36) PRIMARY KEY,
  email VARCHAR(255) UNIQUE NOT NULL,
  password_hash VARCHAR(255) NOT NULL,
  role ENUM('admin', 'student', 'guest') DEFAULT 'student',
  name VARCHAR(100) NOT NULL,
  student_id VARCHAR(20),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  last_login TIMESTAMP,
  INDEX idx_email (email),
  INDEX idx_student_id (student_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

#### 2. è¯¾ç¨‹è¡¨ (courses)
```sql
CREATE TABLE courses (
  id VARCHAR(36) PRIMARY KEY,
  title VARCHAR(200) NOT NULL,
  code VARCHAR(50) NOT NULL,
  semester VARCHAR(20) NOT NULL,
  level ENUM('undergraduate', 'graduate') NOT NULL,
  description TEXT,
  syllabus TEXT,
  status ENUM('active', 'archived') DEFAULT 'active',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  INDEX idx_semester (semester),
  INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

#### 3. è¯¾ç¨‹èµ„æ–™è¡¨ (course_materials)
```sql
CREATE TABLE course_materials (
  id VARCHAR(36) PRIMARY KEY,
  course_id VARCHAR(36) NOT NULL,
  chapter_id VARCHAR(36),
  title VARCHAR(200) NOT NULL,
  type ENUM('slide', 'video', 'code', 'document') NOT NULL,
  file_url VARCHAR(500) NOT NULL,
  file_size BIGINT,
  download_count INT DEFAULT 0,
  uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (course_id) REFERENCES courses(id) ON DELETE CASCADE,
  INDEX idx_course (course_id),
  INDEX idx_type (type)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

#### 4. ä½œä¸šè¡¨ (assignments)
```sql
CREATE TABLE assignments (
  id VARCHAR(36) PRIMARY KEY,
  course_id VARCHAR(36) NOT NULL,
  title VARCHAR(200) NOT NULL,
  description TEXT,
  due_date TIMESTAMP NOT NULL,
  max_score INT DEFAULT 100,
  status ENUM('draft', 'published', 'closed') DEFAULT 'draft',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (course_id) REFERENCES courses(id) ON DELETE CASCADE,
  INDEX idx_course (course_id),
  INDEX idx_due_date (due_date)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

#### 5. ä½œä¸šæäº¤è¡¨ (submissions)
```sql
CREATE TABLE submissions (
  id VARCHAR(36) PRIMARY KEY,
  assignment_id VARCHAR(36) NOT NULL,
  student_id VARCHAR(36) NOT NULL,
  file_url VARCHAR(500) NOT NULL,
  submit_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  score INT,
  feedback TEXT,
  status ENUM('submitted', 'graded', 'late') DEFAULT 'submitted',
  FOREIGN KEY (assignment_id) REFERENCES assignments(id) ON DELETE CASCADE,
  FOREIGN KEY (student_id) REFERENCES users(id) ON DELETE CASCADE,
  UNIQUE KEY unique_submission (assignment_id, student_id),
  INDEX idx_assignment (assignment_id),
  INDEX idx_student (student_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

#### 6. å­¦ç”Ÿä¿¡æ¯è¡¨ (students)
```sql
CREATE TABLE students (
  id VARCHAR(36) PRIMARY KEY,
  user_id VARCHAR(36) UNIQUE,
  name VARCHAR(100) NOT NULL,
  student_id VARCHAR(20) UNIQUE NOT NULL,
  degree ENUM('undergraduate', 'master', 'phd') NOT NULL,
  enrollment_year INT NOT NULL,
  status ENUM('active', 'graduated') DEFAULT 'active',
  research_area VARCHAR(200),
  thesis_title VARCHAR(300),
  profile_image VARCHAR(500),
  bio TEXT,
  graduation_destination VARCHAR(200),
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE SET NULL,
  INDEX idx_degree (degree),
  INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

#### 7. é€šçŸ¥å…¬å‘Šè¡¨ (announcements)
```sql
CREATE TABLE announcements (
  id VARCHAR(36) PRIMARY KEY,
  title VARCHAR(200) NOT NULL,
  content TEXT NOT NULL,
  type ENUM('course', 'general', 'urgent') DEFAULT 'general',
  course_id VARCHAR(36),
  is_pinned BOOLEAN DEFAULT FALSE,
  publish_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  expiry_date TIMESTAMP,
  author_id VARCHAR(36) NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (course_id) REFERENCES courses(id) ON DELETE SET NULL,
  FOREIGN KEY (author_id) REFERENCES users(id),
  INDEX idx_type (type),
  INDEX idx_publish_date (publish_date)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

#### 8. èµ„æºè¡¨ (resources)
```sql
CREATE TABLE resources (
  id VARCHAR(36) PRIMARY KEY,
  title VARCHAR(200) NOT NULL,
  category ENUM('textbook', 'tool', 'code', 'video', 'other') NOT NULL,
  tags JSON,
  description TEXT,
  file_url VARCHAR(500),
  external_url VARCHAR(500),
  download_count INT DEFAULT 0,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  INDEX idx_category (category)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

---

## API æ¥å£è®¾è®¡

### RESTful API è§„èŒƒ

#### åŸºç¡€è·¯ç”±ç»“æ„
```
/api/v1/auth/*          - è®¤è¯ç›¸å…³
/api/v1/courses/*       - è¯¾ç¨‹ç®¡ç†
/api/v1/materials/*     - èµ„æ–™ç®¡ç†
/api/v1/assignments/*   - ä½œä¸šç®¡ç†
/api/v1/students/*      - å­¦ç”Ÿç®¡ç†
/api/v1/announcements/* - é€šçŸ¥ç®¡ç†
/api/v1/resources/*     - èµ„æºç®¡ç†
/api/v1/admin/*         - åå°ç®¡ç†
```

### æ ¸å¿ƒæ¥å£æ–‡æ¡£

#### è®¤è¯æ¥å£

**1. ç”¨æˆ·ç™»å½•**
```
POST /api/v1/auth/login
Content-Type: application/json

Request:
{
  "email": "student@example.com",
  "password": "password123"
}

Response: 200 OK
{
  "success": true,
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
      "id": "uuid",
      "email": "student@example.com",
      "name": "å¼ ä¸‰",
      "role": "student"
    }
  }
}
```

**2. ç”¨æˆ·æ³¨å†Œ**
```
POST /api/v1/auth/register

Request:
{
  "email": "student@example.com",
  "password": "password123",
  "name": "å¼ ä¸‰",
  "studentId": "2021001"
}

Response: 201 Created
{
  "success": true,
  "message": "æ³¨å†ŒæˆåŠŸ"
}
```

#### è¯¾ç¨‹æ¥å£

**3. è·å–è¯¾ç¨‹åˆ—è¡¨**
```
GET /api/v1/courses?semester=2024æ˜¥å­£&status=active

Response: 200 OK
{
  "success": true,
  "data": {
    "courses": [
      {
        "id": "course-uuid",
        "title": "è½¯ä»¶å·¥ç¨‹åŸºç¡€",
        "code": "CS101",
        "semester": "2024æ˜¥å­£",
        "level": "undergraduate",
        "description": "...",
        "materialCount": 15
      }
    ],
    "total": 1
  }
}
```

**4. è·å–è¯¾ç¨‹è¯¦æƒ…**
```
GET /api/v1/courses/:id

Response: 200 OK
{
  "success": true,
  "data": {
    "id": "course-uuid",
    "title": "è½¯ä»¶å·¥ç¨‹åŸºç¡€",
    "code": "CS101",
    "semester": "2024æ˜¥å­£",
    "level": "undergraduate",
    "description": "...",
    "syllabus": "...",
    "chapters": [
      {
        "id": "chapter-uuid",
        "title": "ç¬¬ä¸€ç« ï¼šæ¦‚è¿°",
        "order": 1,
        "materials": [...]
      }
    ]
  }
}
```

**5. åˆ›å»ºè¯¾ç¨‹ï¼ˆç®¡ç†å‘˜ï¼‰**
```
POST /api/v1/courses
Authorization: Bearer <token>

Request:
{
  "title": "è½¯ä»¶å·¥ç¨‹åŸºç¡€",
  "code": "CS101",
  "semester": "2024æ˜¥å­£",
  "level": "undergraduate",
  "description": "...",
  "syllabus": "..."
}

Response: 201 Created
{
  "success": true,
  "data": {
    "id": "new-course-uuid",
    "title": "è½¯ä»¶å·¥ç¨‹åŸºç¡€",
    ...
  }
}
```

#### èµ„æ–™æ¥å£

**6. è·å–è¯¾ç¨‹èµ„æ–™**
```
GET /api/v1/courses/:courseId/materials

Response: 200 OK
{
  "success": true,
  "data": {
    "materials": [
      {
        "id": "material-uuid",
        "title": "ç¬¬ä¸€ç« è¯¾ä»¶.pptx",
        "type": "slide",
        "fileUrl": "https://oss.example.com/...",
        "fileSize": 1024000,
        "uploadedAt": "2024-02-01T10:00:00Z"
      }
    ]
  }
}
```

**7. ä¸Šä¼ èµ„æ–™ï¼ˆç®¡ç†å‘˜ï¼‰**
```
POST /api/v1/materials/upload
Authorization: Bearer <token>
Content-Type: multipart/form-data

Request:
{
  "courseId": "course-uuid",
  "chapterId": "chapter-uuid",
  "title": "ç¬¬ä¸€ç« è¯¾ä»¶",
  "type": "slide",
  "file": <binary>
}

Response: 201 Created
{
  "success": true,
  "data": {
    "id": "material-uuid",
    "fileUrl": "https://oss.example.com/..."
  }
}
```

#### ä½œä¸šæ¥å£

**8. è·å–ä½œä¸šåˆ—è¡¨**
```
GET /api/v1/courses/:courseId/assignments

Response: 200 OK
{
  "success": true,
  "data": {
    "assignments": [
      {
        "id": "assignment-uuid",
        "title": "ä½œä¸š1ï¼šéœ€æ±‚åˆ†æ",
        "dueDate": "2024-03-15T23:59:59Z",
        "maxScore": 100,
        "status": "published",
        "submitted": false  // å½“å‰ç”¨æˆ·æ˜¯å¦å·²æäº¤
      }
    ]
  }
}
```

**9. æäº¤ä½œä¸š**
```
POST /api/v1/assignments/:id/submit
Authorization: Bearer <token>
Content-Type: multipart/form-data

Request:
{
  "file": <binary>
}

Response: 201 Created
{
  "success": true,
  "message": "æäº¤æˆåŠŸ",
  "data": {
    "submissionId": "submission-uuid",
    "submitTime": "2024-03-10T15:30:00Z"
  }
}
```

**10. æ‰¹æ”¹ä½œä¸šï¼ˆç®¡ç†å‘˜ï¼‰**
```
PUT /api/v1/submissions/:id/grade
Authorization: Bearer <token>

Request:
{
  "score": 95,
  "feedback": "å®Œæˆåº¦å¾ˆå¥½ï¼Œå»ºè®®ä¼˜åŒ–..."
}

Response: 200 OK
{
  "success": true,
  "message": "æ‰¹æ”¹æˆåŠŸ"
}
```

#### å­¦ç”Ÿç®¡ç†æ¥å£

**11. è·å–å­¦ç”Ÿåˆ—è¡¨**
```
GET /api/v1/students?degree=phd&status=active

Response: 200 OK
{
  "success": true,
  "data": {
    "students": [
      {
        "id": "student-uuid",
        "name": "æå››",
        "studentId": "2021001",
        "degree": "phd",
        "researchArea": "è½¯ä»¶æ¶æ„",
        "enrollmentYear": 2021
      }
    ],
    "total": 5
  }
}
```

#### é€šçŸ¥æ¥å£

**12. è·å–é€šçŸ¥åˆ—è¡¨**
```
GET /api/v1/announcements?type=course&courseId=xxx

Response: 200 OK
{
  "success": true,
  "data": {
    "announcements": [
      {
        "id": "announcement-uuid",
        "title": "ä¸‹å‘¨ä¸€åœè¯¾é€šçŸ¥",
        "content": "...",
        "type": "course",
        "isPinned": false,
        "publishDate": "2024-02-10T08:00:00Z"
      }
    ]
  }
}
```

### é”™è¯¯å¤„ç†è§„èŒƒ

#### ç»Ÿä¸€é”™è¯¯å“åº”æ ¼å¼
```json
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®",
    "details": {
      "field": "email",
      "value": "invalid-email"
    }
  }
}
```

#### å¸¸ç”¨é”™è¯¯ç 
- `400` - è¯·æ±‚å‚æ•°é”™è¯¯
- `401` - æœªè®¤è¯
- `403` - æ— æƒé™
- `404` - èµ„æºä¸å­˜åœ¨
- `409` - èµ„æºå†²çª
- `422` - éªŒè¯å¤±è´¥
- `500` - æœåŠ¡å™¨é”™è¯¯

---

## å®‰å…¨æ€§è®¾è®¡

### è®¤è¯å®‰å…¨

#### 1. å¯†ç å®‰å…¨
```javascript
const bcrypt = require('bcrypt');
const SALT_ROUNDS = 10;

// å¯†ç åŠ å¯†
async function hashPassword(password) {
  return await bcrypt.hash(password, SALT_ROUNDS);
}

// å¯†ç éªŒè¯
async function verifyPassword(password, hash) {
  return await bcrypt.compare(password, hash);
}
```

#### 2. JWT Token ç®¡ç†
```javascript
const jwt = require('jsonwebtoken');

// Token é…ç½®
const TOKEN_CONFIG = {
  accessTokenExpiry: '2h',      // è®¿é—®ä»¤ç‰Œ 2å°æ—¶
  refreshTokenExpiry: '7d',     // åˆ·æ–°ä»¤ç‰Œ 7å¤©
  secret: process.env.JWT_SECRET
};

// ç”Ÿæˆ Token
function generateToken(user) {
  return jwt.sign(
    {
      userId: user.id,
      role: user.role,
      email: user.email
    },
    TOKEN_CONFIG.secret,
    { expiresIn: TOKEN_CONFIG.accessTokenExpiry }
  );
}
```

#### 3. é˜²æš´åŠ›ç ´è§£
- ç™»å½•å¤±è´¥æ¬¡æ•°é™åˆ¶ï¼ˆ5æ¬¡/15åˆ†é’Ÿï¼‰
- IP é™æµ
- éªŒè¯ç æœºåˆ¶ï¼ˆå¯é€‰ï¼‰

### æ•°æ®å®‰å…¨

#### 1. SQL æ³¨å…¥é˜²æŠ¤
- ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
- ORM æ¡†æ¶è‡ªåŠ¨è½¬ä¹‰
- è¾“å…¥éªŒè¯

```javascript
// âŒ é”™è¯¯ç¤ºä¾‹
const userId = req.params.id;
const query = `SELECT * FROM users WHERE id = ${userId}`;

// âœ… æ­£ç¡®ç¤ºä¾‹
const userId = req.params.id;
const query = 'SELECT * FROM users WHERE id = ?';
db.query(query, [userId]);
```

#### 2. XSS é˜²æŠ¤
- è¾“å‡ºè½¬ä¹‰
- CSP (Content Security Policy)
- HTTP-only Cookies

```javascript
// è®¾ç½®å®‰å…¨å“åº”å¤´
app.use(helmet({
  contentSecurityPolicy: {
    directives: {
      defaultSrc: ["'self'"],
      scriptSrc: ["'self'", "'unsafe-inline'"],
      styleSrc: ["'self'", "'unsafe-inline'"],
      imgSrc: ["'self'", "data:", "https:"]
    }
  }
}));
```

#### 3. CSRF é˜²æŠ¤
```javascript
const csrf = require('csurf');
const csrfProtection = csrf({ cookie: true });

app.post('/api/v1/courses', csrfProtection, (req, res) => {
  // å¤„ç†è¯·æ±‚
});
```

### æ–‡ä»¶å®‰å…¨

#### 1. æ–‡ä»¶ä¸Šä¼ é™åˆ¶
```javascript
const multer = require('multer');

const upload = multer({
  limits: {
    fileSize: 50 * 1024 * 1024  // 50MB
  },
  fileFilter: (req, file, cb) => {
    const allowedTypes = [
      'application/pdf',
      'application/vnd.ms-powerpoint',
      'application/vnd.openxmlformats-officedocument.presentationml.presentation',
      'application/zip'
    ];
    
    if (allowedTypes.includes(file.mimetype)) {
      cb(null, true);
    } else {
      cb(new Error('ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹'));
    }
  }
});
```

#### 2. æ–‡ä»¶åå®‰å…¨å¤„ç†
```javascript
const path = require('path');
const crypto = require('crypto');

function sanitizeFilename(filename) {
  const ext = path.extname(filename);
  const hash = crypto.randomBytes(16).toString('hex');
  return `${hash}${ext}`;
}
```

### è®¿é—®æ§åˆ¶

#### RBAC æƒé™æ¨¡å‹
```javascript
const permissions = {
  admin: ['*'],  // æ‰€æœ‰æƒé™
  student: [
    'courses:read',
    'materials:read',
    'assignments:read',
    'assignments:submit'
  ],
  guest: [
    'courses:read'
  ]
};

function hasPermission(role, action) {
  return permissions[role].includes('*') || 
         permissions[role].includes(action);
}
```

---

## éƒ¨ç½²æ–¹æ¡ˆ

### å¼€å‘ç¯å¢ƒ

```bash
# ç›®å½•ç»“æ„
project/
â”œâ”€â”€ frontend/          # React å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ public/
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ backend/           # Node.js åç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ tests/
â”‚   â””â”€â”€ package.json
â””â”€â”€ docker-compose.yml
```

#### Docker Compose é…ç½®
```yaml
version: '3.8'

services:
  mysql:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: root
      MYSQL_DATABASE: professor_website
    ports:
      - "3306:3306"
    volumes:
      - mysql-data:/var/lib/mysql

  redis:
    image: redis:7.0-alpine
    ports:
      - "6379:6379"

  backend:
    build: ./backend
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=development
      - DB_HOST=mysql
      - REDIS_HOST=redis
    depends_on:
      - mysql
      - redis
    volumes:
      - ./backend:/app

  frontend:
    build: ./frontend
    ports:
      - "5173:5173"
    volumes:
      - ./frontend:/app

volumes:
  mysql-data:
```

### ç”Ÿäº§ç¯å¢ƒ

#### æœåŠ¡å™¨é…ç½®å»ºè®®
- **åº”ç”¨æœåŠ¡å™¨**ï¼š2æ ¸4Gï¼ˆåˆæœŸï¼‰ï¼Œå¯æ‰©å±•è‡³ 4æ ¸8G
- **æ•°æ®åº“æœåŠ¡å™¨**ï¼š2æ ¸4G + SSD
- **æ“ä½œç³»ç»Ÿ**ï¼šUbuntu 22.04 LTS
- **Web æœåŠ¡å™¨**ï¼šNginx 1.24+

#### Nginx é…ç½®ç¤ºä¾‹
```nginx
# /etc/nginx/sites-available/professor-website

upstream backend {
    server 127.0.0.1:3000;
    keepalive 64;
}

server {
    listen 80;
    server_name example.com www.example.com;
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name example.com www.example.com;

    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;

    # å‰ç«¯é™æ€æ–‡ä»¶
    location / {
        root /var/www/professor-website/dist;
        try_files $uri $uri/ /index.html;
        expires 1y;
        add_header Cache-Control "public, immutable";
    }

    # API ä»£ç†
    location /api/ {
        proxy_pass http://backend;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_cache_bypass $http_upgrade;
    }

    # æ–‡ä»¶ä¸Šä¼ å¤§å°é™åˆ¶
    client_max_body_size 50M;
}
```

#### PM2 è¿›ç¨‹ç®¡ç†
```javascript
// ecosystem.config.js
module.exports = {
  apps: [{
    name: 'professor-api',
    script: './dist/main.js',
    instances: 'max',
    exec_mode: 'cluster',
    env: {
      NODE_ENV: 'production',
      PORT: 3000
    },
    error_file: './logs/err.log',
    out_file: './logs/out.log',
    log_date_format: 'YYYY-MM-DD HH:mm:ss Z'
  }]
};
```

### CI/CD æµç¨‹

#### GitHub Actions é…ç½®
```yaml
# .github/workflows/deploy.yml
name: Deploy to Production

on:
  push:
    branches: [ main ]

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
    
    - name: Install dependencies
      run: |
        cd frontend && npm ci
        cd ../backend && npm ci
    
    - name: Run tests
      run: |
        cd backend && npm test
    
    - name: Build frontend
      run: |
        cd frontend && npm run build
    
    - name: Build backend
      run: |
        cd backend && npm run build
    
    - name: Deploy to server
      uses: easingthemes/ssh-deploy@v2
      env:
        SSH_PRIVATE_KEY: ${{ secrets.SSH_PRIVATE_KEY }}
        REMOTE_HOST: ${{ secrets.REMOTE_HOST }}
        REMOTE_USER: ${{ secrets.REMOTE_USER }}
        TARGET: /var/www/professor-website
```

### æ•°æ®å¤‡ä»½æ–¹æ¡ˆ

#### MySQL è‡ªåŠ¨å¤‡ä»½è„šæœ¬
```bash
#!/bin/bash
# backup.sh

BACKUP_DIR="/backup/mysql"
DATE=$(date +%Y%m%d_%H%M%S)
DB_NAME="professor_website"

# åˆ›å»ºå¤‡ä»½
mysqldump -u root -p${DB_PASSWORD} ${DB_NAME} | gzip > ${BACKUP_DIR}/${DB_NAME}_${DATE}.sql.gz

# åˆ é™¤ 7 å¤©å‰çš„å¤‡ä»½
find ${BACKUP_DIR} -name "*.sql.gz" -mtime +7 -delete

# ä¸Šä¼ åˆ°äº‘å­˜å‚¨ï¼ˆå¯é€‰ï¼‰
# aliyun oss cp ${BACKUP_DIR}/${DB_NAME}_${DATE}.sql.gz oss://backup/
```

#### å®šæ—¶ä»»åŠ¡
```bash
# crontab -e
# æ¯å¤©å‡Œæ™¨ 2 ç‚¹æ‰§è¡Œå¤‡ä»½
0 2 * * * /home/admin/scripts/backup.sh >> /var/log/backup.log 2>&1
```

---

## å¼€å‘è§„èŒƒ

### ä»£ç è§„èŒƒ

#### ESLint é…ç½®
```json
{
  "extends": [
    "eslint:recommended",
    "plugin:@typescript-eslint/recommended",
    "plugin:react/recommended",
    "plugin:react-hooks/recommended"
  ],
  "rules": {
    "indent": ["error", 2],
    "quotes": ["error", "single"],
    "semi": ["error", "always"],
    "no-console": "warn",
    "@typescript-eslint/explicit-module-boundary-types": "off"
  }
}
```

#### Prettier é…ç½®
```json
{
  "semi": true,
  "singleQuote": true,
  "tabWidth": 2,
  "trailingComma": "es5",
  "printWidth": 80
}
```

### Git å·¥ä½œæµ

#### åˆ†æ”¯ç­–ç•¥
```
main           - ç”Ÿäº§ç¯å¢ƒ
â”œâ”€â”€ develop    - å¼€å‘ç¯å¢ƒ
    â”œâ”€â”€ feature/course-management
    â”œâ”€â”€ feature/file-upload
    â””â”€â”€ bugfix/login-issue
```

#### Commit è§„èŒƒ
```
feat: æ·»åŠ è¯¾ç¨‹ç®¡ç†åŠŸèƒ½
fix: ä¿®å¤æ–‡ä»¶ä¸Šä¼ bug
docs: æ›´æ–°APIæ–‡æ¡£
style: ä»£ç æ ¼å¼åŒ–
refactor: é‡æ„è®¤è¯æ¨¡å—
test: æ·»åŠ å•å…ƒæµ‹è¯•
chore: æ›´æ–°ä¾èµ–åŒ…
```

### å‘½åè§„èŒƒ

#### æ–‡ä»¶å‘½å
- React ç»„ä»¶ï¼š`PascalCase.tsx` (å¦‚ `CourseList.tsx`)
- å·¥å…·å‡½æ•°ï¼š`camelCase.ts` (å¦‚ `formatDate.ts`)
- å¸¸é‡æ–‡ä»¶ï¼š`UPPER_SNAKE_CASE.ts` (å¦‚ `API_ROUTES.ts`)

#### å˜é‡å‘½å
```typescript
// ç»„ä»¶
const CourseCard = () => {};

// å˜é‡
const userName = 'John';
const MAX_FILE_SIZE = 50 * 1024 * 1024;

// å‡½æ•°
function getUserById(id: string) {}
async function fetchCourseList() {}

// æ¥å£
interface ICourse {}
type CourseStatus = 'active' | 'archived';
```

---

## æµ‹è¯•è®¡åˆ’

### å•å…ƒæµ‹è¯•

#### åç«¯æµ‹è¯•ï¼ˆJestï¼‰
```typescript
// tests/services/course.service.test.ts
import { CourseService } from '../src/services/course.service';

describe('CourseService', () => {
  let courseService: CourseService;

  beforeEach(() => {
    courseService = new CourseService();
  });

  test('should create a new course', async () => {
    const courseData = {
      title: 'è½¯ä»¶å·¥ç¨‹',
      code: 'CS101',
      semester: '2024æ˜¥å­£',
      level: 'undergraduate'
    };

    const result = await courseService.create(courseData);
    
    expect(result).toHaveProperty('id');
    expect(result.title).toBe(courseData.title);
  });

  test('should throw error for duplicate course code', async () => {
    await expect(
      courseService.create({ code: 'CS101', ... })
    ).rejects.toThrow('è¯¾ç¨‹ç¼–å·å·²å­˜åœ¨');
  });
});
```

#### å‰ç«¯æµ‹è¯•ï¼ˆReact Testing Libraryï¼‰
```typescript
// tests/components/CourseCard.test.tsx
import { render, screen } from '@testing-library/react';
import CourseCard from '../src/components/CourseCard';

describe('CourseCard', () => {
  const mockCourse = {
    id: '1',
    title: 'è½¯ä»¶å·¥ç¨‹åŸºç¡€',
    code: 'CS101',
    semester: '2024æ˜¥å­£'
  };

  test('renders course information', () => {
    render(<CourseCard course={mockCourse} />);
    
    expect(screen.getByText('è½¯ä»¶å·¥ç¨‹åŸºç¡€')).toBeInTheDocument();
    expect(screen.getByText('CS101')).toBeInTheDocument();
  });
});
```

### é›†æˆæµ‹è¯•

#### API é›†æˆæµ‹è¯•
```typescript
// tests/integration/auth.test.ts
import request from 'supertest';
import app from '../src/app';

describe('Auth API', () => {
  test('POST /api/v1/auth/login - success', async () => {
    const response = await request(app)
      .post('/api/v1/auth/login')
      .send({
        email: 'test@example.com',
        password: 'password123'
      });

    expect(response.status).toBe(200);
    expect(response.body).toHaveProperty('data.token');
  });

  test('POST /api/v1/auth/login - invalid credentials', async () => {
    const response = await request(app)
      .post('/api/v1/auth/login')
      .send({
        email: 'test@example.com',
        password: 'wrongpassword'
      });

    expect(response.status).toBe(401);
  });
});
```

### E2E æµ‹è¯•

#### Cypress é…ç½®
```typescript
// cypress/e2e/course-management.cy.ts
describe('Course Management', () => {
  beforeEach(() => {
    cy.login('admin@example.com', 'password');
  });

  it('should create a new course', () => {
    cy.visit('/admin/courses');
    cy.get('[data-testid="create-course-btn"]').click();
    
    cy.get('input[name="title"]').type('è½¯ä»¶å·¥ç¨‹åŸºç¡€');
    cy.get('input[name="code"]').type('CS101');
    cy.get('select[name="semester"]').select('2024æ˜¥å­£');
    
    cy.get('button[type="submit"]').click();
    
    cy.contains('åˆ›å»ºæˆåŠŸ').should('be.visible');
  });
});
```

### æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡
- å•å…ƒæµ‹è¯•è¦†ç›–ç‡ï¼š> 80%
- é›†æˆæµ‹è¯•è¦†ç›–ç‡ï¼š> 70%
- å…³é”®è·¯å¾„ E2E æµ‹è¯•ï¼š100%

---

## æ€§èƒ½ä¼˜åŒ–

### å‰ç«¯ä¼˜åŒ–
1. **ä»£ç åˆ†å‰²**
   - è·¯ç”±çº§æ‡’åŠ è½½
   - ç»„ä»¶çº§åŠ¨æ€å¯¼å…¥

2. **èµ„æºä¼˜åŒ–**
   - å›¾ç‰‡å‹ç¼©å’Œ WebP æ ¼å¼
   - å­—ä½“å­é›†åŒ–
   - CSS/JS å‹ç¼©

3. **ç¼“å­˜ç­–ç•¥**
   - Service Worker
   - æµè§ˆå™¨ç¼“å­˜
   - CDN åŠ é€Ÿ

### åç«¯ä¼˜åŒ–
1. **æ•°æ®åº“ä¼˜åŒ–**
   - ç´¢å¼•ä¼˜åŒ–
   - æŸ¥è¯¢ä¼˜åŒ–
   - è¿æ¥æ± é…ç½®

2. **ç¼“å­˜ç­–ç•¥**
   - Redis çƒ­æ•°æ®ç¼“å­˜
   - API å“åº”ç¼“å­˜
   - é™æ€èµ„æºç¼“å­˜

3. **å¹¶å‘å¤„ç†**
   - é›†ç¾¤æ¨¡å¼
   - è´Ÿè½½å‡è¡¡
   - å¼‚æ­¥å¤„ç†

---

## ç›‘æ§å’Œè¿ç»´

### æ—¥å¿—ç®¡ç†
```javascript
// Winston é…ç½®
const winston = require('winston');

const logger = winston.createLogger({
  level: 'info',
  format: winston.format.combine(
    winston.format.timestamp(),
    winston.format.json()
  ),
  transports: [
    new winston.transports.File({ 
      filename: 'error.log', 
      level: 'error' 
    }),
    new winston.transports.File({ 
      filename: 'combined.log' 
    })
  ]
});
```

### æ€§èƒ½ç›‘æ§
- **å‰ç«¯**: Sentry + Google Analytics
- **åç«¯**: PM2 ç›‘æ§ + è‡ªå®šä¹‰ç›‘æ§è„šæœ¬
- **æ•°æ®åº“**: MySQL slow query log

### å‘Šè­¦æœºåˆ¶
- æœåŠ¡å™¨ CPU/å†…å­˜å‘Šè­¦
- æ•°æ®åº“è¿æ¥æ•°å‘Šè­¦
- API å“åº”æ—¶é—´å‘Šè­¦
- é”™è¯¯ç‡å‘Šè­¦

---

## é™„å½•

### å¼€å‘æ—¶é—´ä¼°ç®—
| æ¨¡å— | å·¥ä½œé‡ï¼ˆäººå¤©ï¼‰ |
|------|--------------|
| è®¤è¯ç³»ç»Ÿ | 3 |
| è¯¾ç¨‹ç®¡ç† | 5 |
| èµ„æ–™ç®¡ç† | 4 |
| ä½œä¸šç³»ç»Ÿ | 6 |
| å­¦ç”Ÿç®¡ç† | 3 |
| é€šçŸ¥ç³»ç»Ÿ | 2 |
| åå°ç®¡ç† | 4 |
| å‰ç«¯é¡µé¢ | 10 |
| æµ‹è¯•ä¸éƒ¨ç½² | 5 |
| **æ€»è®¡** | **42 äººå¤©** |

### é¢„ç®—ä¼°ç®—ï¼ˆå‚è€ƒï¼‰
- åŸŸåï¼š100å…ƒ/å¹´
- æœåŠ¡å™¨ï¼š500-1000å…ƒ/æœˆ
- OSS å­˜å‚¨ï¼š100å…ƒ/æœˆ
- SSL è¯ä¹¦ï¼šå…è´¹ï¼ˆLet's Encryptï¼‰
- å¼€å‘æˆæœ¬ï¼šæ ¹æ®å›¢é˜Ÿæƒ…å†µ

### æŠ€æœ¯æ–‡æ¡£èµ„æº
- [React å®˜æ–¹æ–‡æ¡£](https://react.dev)
- [TypeScript æ‰‹å†Œ](https://www.typescriptlang.org/docs/)
- [Node.js æ–‡æ¡£](https://nodejs.org/docs/)
- [MySQL æ–‡æ¡£](https://dev.mysql.com/doc/)
- [Ant Design](https://ant.design)

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2024å¹´2æœˆ11æ—¥  
**ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ
